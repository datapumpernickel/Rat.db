<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Ratdb ‚Ä¢ Rat.db</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Ratdb">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Rat.db</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Ratdb.html">Ratdb</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/datapumpernickel/Rat.db/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Ratdb</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/datapumpernickel/Rat.db/blob/master/vignettes/Ratdb.Rmd" class="external-link"><code>vignettes/Ratdb.Rmd</code></a></small>
      <div class="d-none name"><code>Ratdb.Rmd</code></div>
    </div>

    
    
<p><code>Rat.db</code> is an R package designed to simplify access to
the Stockholm International Peace Research Institute (SIPRI) Arms
Transfers Database (ATDB). It provides functions for retrieving arms
transfer data efficiently, allowing researchers and analysts to work
with SIPRI‚Äôs data in a structured and reproducible manner in R. The
package handles API requests, formats responses into tidy data, and
offers caching options to optimize performance.</p>
<div class="section level2">
<h2 id="installation">‚öôÔ∏è Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of Rat.db from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"datapumpernickel/Rat.db"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">üí≤üîÅÔ∏è Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="retrieving-arms-transfer-data">Retrieving Arms Transfer Data<a class="anchor" aria-label="anchor" href="#retrieving-arms-transfer-data"></a>
</h3>
<p>The core function of <code>Rat.db</code> is
<code><a href="../reference/atdb_get_data.html">atdb_get_data()</a></code>, which retrieves arms transfer data from
SIPRI‚Äôs ATDB.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/datapumpernickel/Rat.db" class="external-link">Rat.db</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/atdb_get_data.html">atdb_get_data</a></span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">start_year</span>, <span class="va">end_year</span>, cache <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="parameters">Parameters:<a class="anchor" aria-label="anchor" href="#parameters"></a>
</h4>
<ul>
<li>
<code>verbose</code>: Logical. If <code>TRUE</code>, prints
additional details about the query process. Default is
<code>FALSE</code>.</li>
<li>
<code>start_year</code>: Numeric. The start of the date range to
query.</li>
<li>
<code>end_year</code>: Numeric. The end of the date range to
query.</li>
<li>
<code>cache</code>: Logical. If <code>TRUE</code>, caches the
response to avoid redundant requests. Default is
<code>FALSE</code>.</li>
</ul>
</div>
<div class="section level4">
<h4 id="example-usage">Example Usage:<a class="anchor" aria-label="anchor" href="#example-usage"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retrieve data from 2000 to 2020, using cache</span></span>
<span><span class="va">arms_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/atdb_get_data.html">atdb_get_data</a></span><span class="op">(</span>start_year <span class="op">=</span> <span class="fl">2000</span>, end_year <span class="op">=</span> <span class="fl">2020</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Retrieve data without using cache</span></span>
<span><span class="va">arms_data_no_cache</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/atdb_get_data.html">atdb_get_data</a></span><span class="op">(</span>start_year <span class="op">=</span> <span class="fl">2000</span>, end_year <span class="op">=</span> <span class="fl">2020</span>, cache <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="caching-behavior">üóÑÔ∏è Caching Behavior<a class="anchor" aria-label="anchor" href="#caching-behavior"></a>
</h2>
<p>By default, <code>Rat.db</code> uses a disk-based caching system to
store API responses. This prevents redundant queries to the SIPRI
database, improving performance and reducing server load. However, keep
in mind that this could prevent you from getting the most recent data,
if the SIPRI data has been renewed, but you are still using cached data.
This is why caching is by default disabled.</p>
<div class="section level4">
<h4 id="default-cache-settings">Default Cache Settings:<a class="anchor" aria-label="anchor" href="#default-cache-settings"></a>
</h4>
<ul>
<li>
<strong>Maximum Cache Size</strong>: <code>1GB</code> (1024 * 1024^2
bytes)</li>
<li>
<strong>Maximum Cache Age</strong>: <code>1 year</code>
(60<em>60</em>24*365 seconds)</li>
<li>
<strong>Maximum Cached Entries</strong>: Unlimited
(<code>Inf</code>)</li>
</ul>
</div>
<div class="section level4">
<h4 id="changing-cache-settings">Changing Cache Settings:<a class="anchor" aria-label="anchor" href="#changing-cache-settings"></a>
</h4>
<p>Users can override the default cache settings by setting environment
variables before loading the package:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>RATDB_CACHE_MAX_SIZE <span class="op">=</span> <span class="st">"500 * 1024^2"</span><span class="op">)</span>  <span class="co"># Set max cache size to 500MB</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>RATDB_CACHE_MAX_AGE <span class="op">=</span> <span class="st">"60*60*24*180"</span><span class="op">)</span>  <span class="co"># Set max cache age to 180 days</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>RATDB_CACHE_MAX_N <span class="op">=</span> <span class="st">"500"</span><span class="op">)</span>             <span class="co"># Limit cache to 500 entries</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="clearing-the-cache">Clearing the Cache<a class="anchor" aria-label="anchor" href="#clearing-the-cache"></a>
</h4>
<p>If needed, users can manually prune the cache by running:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cachem</span><span class="fu">::</span><span class="fu"><a href="https://cachem.r-lib.org/reference/cache_disk.html" class="external-link">cache_disk</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/userdir.html" class="external-link">R_user_dir</a></span><span class="op">(</span><span class="st">'Rat.db'</span>, which <span class="op">=</span> <span class="st">'cache'</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="fu">prune</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This will remove expired entries, ensuring that outdated data is not
used in queries. However, this also happens automatically with every
request where <code>cache = TRUE</code>.</p>
<p>You can also run <code>destroy()</code> to fully delete the cache.
Note however, this requires a session restart to work with the package
again afterwards.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cachem</span><span class="fu">::</span><span class="fu"><a href="https://cachem.r-lib.org/reference/cache_disk.html" class="external-link">cache_disk</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/userdir.html" class="external-link">R_user_dir</a></span><span class="op">(</span><span class="st">'Rat.db'</span>, which <span class="op">=</span> <span class="st">'cache'</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="fu">destroy</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="sources-and-methods">üìù Sources and Methods<a class="anchor" aria-label="anchor" href="#sources-and-methods"></a>
</h2>
<ul>
<li>Always verify a few data points manually on the SIPRI website.</li>
<li>The dataset may have limitations; consult the SIPRI <a href="https://www.sipri.org/databases/armstransfers/sources-and-methods" class="external-link"><strong>Sources
and Methods</strong></a> for details.</li>
<li>TIV values are not comparable to actual prices of weapons, SIPRI
writes: <em>SIPRI TIV figures do not represent sales prices for arms
transfers. They should therefore not be directly compared with gross
domestic product (GDP), military expenditure, sales values or the
financial value of export licences in an attempt to measure the economic
burden of arms imports or the economic benefits of exports. They are
best used as the raw data for calculating trends in international arms
transfers over periods of time, global percentages for suppliers and
recipients, and percentages for the volume of transfers to or from
particular states.</em>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="copyright">üîí Copyright<a class="anchor" aria-label="anchor" href="#copyright"></a>
</h2>
<p>The Stockholm International Peace Research Institute limits the
copying and redistribution of its data to the following two
use-cases:</p>
<ul>
<li>the excerption of SIPRI copyrighted material for such purposes as
criticism, comment, news reporting, teaching, scholarship or research in
which the use is for non-commercial purposes</li>
<li>the reproduction of less than 10 per cent of a published data
set.</li>
</ul>
<p>Hence, this package does <strong>not</strong> contain any SIPRI data
itself. It merely automatizes the access through the website, by making
the corresponding POST request and cleaning the resulting xlsx file into
tidy formats.</p>
</div>
<div class="section level2">
<h2 id="citation">ü§ù Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>Please make sure to cite SIPRI when using their data with:</p>
<p><em>Information from the Stockholm International Peace Research
Institute (SIPRI) Arms Transfers Database</em></p>
<p>You can get a citation for the package with:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">'Rat.db'</span><span class="op">)</span></span></code></pre></div>
<hr>
<p>For more information, refer to the <a href="https://armstransfers.sipri.org/ArmsTransfer/" class="external-link">SIPRI ATDB
website</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paul Bochtler.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
